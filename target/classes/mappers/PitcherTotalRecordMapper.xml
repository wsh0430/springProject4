<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.springProject4.dao.PitcherTotalRecordDao">

    <!-- 모든 투수 기록 조회 -->
    <select id="getAllPitcherStats" resultType="com.spring.springProject4.dto.PitcherTotalRecordDto">
        SELECT * FROM pitcher_stats
    </select>

    <!-- 중복 투수 기록 조회 (player + year기준) -->
    <select id="findExistingPitcherRecord" resultType="com.spring.springProject4.dto.PitcherTotalRecordDto">
        SELECT *
        FROM pitcher_stats
        WHERE player = #{player}
          AND year = #{year}
    </select>

    <!-- 투수 기록 삽입 -->
    <insert id="insertPitcherRecord">
        INSERT INTO pitcher_stats (
            player, team_logo, year,
            war, games_p, games_start, complete_games, shutouts,
            wins, losses, saves, holds, innings, earned_runs, runs_allowed,
            hits_allowed, home_runs_allowed, bb_allowed, strikeouts, balks, wild_pitches,
            era, fip, whip
        ) VALUES (
            #{dto.player}, #{dto.teamLogo}, #{dto.year},
            #{dto.war}, #{dto.gamesP}, #{dto.gamesStart}, #{dto.completeGames}, #{dto.shutouts},
            #{dto.wins}, #{dto.losses}, #{dto.saves}, #{dto.holds}, #{dto.innings}, #{dto.earnedRuns}, #{dto.runsAllowed},
            #{dto.hitsAllowed}, #{dto.homeRunsAllowed}, #{dto.bbAllowed}, #{dto.strikeouts}, #{dto.balks}, #{dto.wildPitches},
            #{dto.era}, #{dto.fip}, #{dto.whip}
        )
    </insert>

    <!-- 투수 기록 수정 -->
    <update id="updatePitcherStats">
        UPDATE pitcher_stats SET
            team_logo = #{dto.teamLogo},
            games_p = #{dto.gamesP},
            games_start = #{dto.gamesStart},
            complete_games = #{dto.completeGames},
            shutouts = #{dto.shutouts},
            wins = #{dto.wins},
            losses = #{dto.losses},
            saves = #{dto.saves},
            holds = #{dto.holds},
            innings = #{dto.innings},
            earned_runs = #{dto.earnedRuns},
            runs_allowed = #{dto.runsAllowed},
            hits_allowed = #{dto.hitsAllowed},
            home_runs_allowed = #{dto.homeRunsAllowed},
            bb_allowed = #{dto.bbAllowed},
            strikeouts = #{dto.strikeouts},
            balks = #{dto.balks},
            wild_pitches = #{dto.wildPitches},
            era = #{dto.era},
            fip = #{dto.fip},
            whip = #{dto.whip}
        WHERE player = #{dto.player}
          AND year = #{dto.year}
          AND war = #{dto.war}
    </update>

</mapper>
